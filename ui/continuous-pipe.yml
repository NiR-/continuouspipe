tasks:
    images:
        build: ~

    production:
        deploy:
            cluster: ${CLUSTER}
            environment:
                name: '"ui-" ~ code_reference.branch'

            services:
                ui:
                    endpoints:
                        -
                            name: https
                            type: NodePort
                            ssl_certificates:
                                -
                                    name: continuouspipeio
                                    cert: ${WILDCARD_SSL_CERT}
                                    key: ${WILDCARD_SSL_KEY}

                    specification:
                        environment_variables:
                            - name: AUTHENTICATOR_API_URL
                              value: authenticator.continuouspipe.io
                            - name: LOG_STREAM_URL
                              value: logstream.continuouspipe.io
                            - name: PIPE_API_URL
                              value: pipe.continuouspipe.io
                            - name: RIVER_API_URL
                              value: 130.211.45.100
