<div class="container">
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header ch-alt">
                    <h2>Flow</h2>
                </div>

                <table class="table table-inner table-vmiddle">
                    <thead>
                    <tr>
                        <th>Repository</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><small>{{ flow.repository.repository.owner.login }}/</small> {{ flow.repository.repository.name }}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header ch-alt">
                    <h2>Tasks</h2>
                </div>

                <table class="table table-inner table-vmiddle">
                    <tbody>
                    <tr ng-repeat="task in flow.tasks">
                        <td>
                            <strong>{{ task.name }}</strong>
                            <table class="table" ng-if="task.context">
                                <tr ng-repeat="(key, value) in task.context">
                                    <th>{{ key }}</th>
                                    <td>{{ value }}</td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="block-header">
        <h2>Tides</h2>
    </div>

    <div class="row">
        <remote-resource resource-name="tides">
            <div class="text-center p20" ng-show="tides.length === 0">No tides ran yet. Try to push to your repository.</div>
            <table class="table table-inner table-vmiddle" ng-show="tides.length">
                <thead>
                <tr>
                    <th>UUID</th>
                    <th>Code reference</th>
                    <th>Creation date</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="tide in tides">
                    <td>{{ tide.uuid }}</td>
                    <td>{{ tide.code_reference.branch }} <small>({{ tide.code_reference.sha1 }})</small></td>
                    <td>{{ tide.creation_date | date:'dd/MM/yyyy hh:mm:ss' }}</td>
                    <td ng-class="{'c-green': tide.status == 'success', 'c-red': tide.status == 'failure', 'c-blue': tide.status === 'running'}">{{ tide.status }}</td>
                    <td><a ui-sref="tide.logs({tideUuid: tide.uuid})">Show logs</a></td>
                </tr>
                </tbody>
            </table>
        </remote-resource>
    </div>
</div>
