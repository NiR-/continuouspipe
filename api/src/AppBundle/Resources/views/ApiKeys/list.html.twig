{% extends "AppBundle:Account:layout.html.twig" %}
{% block nav_api_class %} class="active"{% endblock %}
{% block account_content %}
<p>API keys are used to programmatically access your ContinuousPipe account and do action on your behalf.</p>
<table class="table table-hovered table-bordered">
    <thead>
        <tr>
            <th>Key</th>
            <th>Description</th>
            <th>Creation date</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for key in keys %}
        <tr>
            <td>{{ key.apiKey }}</td>
            <td>{{ key.description }}</td>
            <td>{{ key.creationDate | date('d/m/Y H:i') }}</td>
            <td>
                <form method="POST" action="{{ path('account_api_keys_delete', {'uuid': key.uuid}) }}" onsubmit="confirm('Are you sure to remove this API key?');">
                    <button type="submit" class="btn btn-small btn-danger" onclick="">Delete</button>
                </form>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="4"><em>No API key found.</em></td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h2>New key</h2>
<form class="form-horizontal" method="POST" action="{{ path('account_api_keys_create') }}">
    <div class="form-group">
        <label for="inputDescription" class="col-sm-2 control-label">Description</label>
        <div class="col-sm-10">
            <input type="text" name="description" class="form-control" id="inputDescription" placeholder="Description" required="required">
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-10 col-sm-offset-2">
            <button type="submit" class="btn btn-primary">Create</button>
        </div>
    </div>
</form>
{% endblock %}
